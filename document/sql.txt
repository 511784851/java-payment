CREATE DATABASE paymentDB;


 #发红包
 CREATE TABLE `t_red_send` (
   `ord_no` VARCHAR(50) NOT NULL COMMENT '业务订单号',
   `send_uuid` BIGINT(18) NOT NULL COMMENT '发送者UUID',
   `red_type` TINYINT(1) NOT NULL COMMENT '红包类型（1-普通红包，2-等额群红包，3-随机群红包）',
   `tot_amount` INT(10) NOT NULL COMMENT '总金额（单位：分）',
   `any_amount` INT(10) NOT NULL COMMENT '单个金额（单位：分）',
   `num` INT(10) NOT NULL COMMENT '红包数量',
   `content` VARCHAR(100) NOT NULL COMMENT '描述',
   `send_tm` BIGINT(18) NOT NULL COMMENT '发送时间',
   `invalid_tm` BIGINT(18) NOT NULL COMMENT '失效时间',
   `rec_status` TINYINT(1) NOT NULL COMMENT '领取状态（0-不可领取，1-领取中，2-已结束）',
   `pay_status` TINYINT(1) NOT NULL COMMENT '支付状态（0-未支付，1-已支付，2-支付异常）',
   PRIMARY KEY (`ord_no`)
 ) ENGINE=INNODB DEFAULT CHARSET=utf8;
 
 #领红包
 CREATE TABLE `t_red_rec` (
   `rec_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
   `ord_no` VARCHAR(50) NOT NULL COMMENT '业务订单号',
   `rec_uuid` VARCHAR(18) NOT NULL COMMENT '领取人uuid',
   `amount` INT(11) NOT NULL COMMENT '领取金额（单位：分）',
   `rec_tm` BIGINT(18) NOT NULL COMMENT '领取时间',
   PRIMARY KEY (`rec_id`),
   UNIQUE KEY `idx_rec` (`ord_no`,`rec_uuid`)
 ) ENGINE=INNODB DEFAULT CHARSET=utf8;
 
 #打赏
 CREATE TABLE `t_reward` (
   `ord_no` VARCHAR(50) NOT NULL COMMENT '订单号',
   `rew_uuid` BIGINT(18) NOT NULL COMMENT '打赏者UUID',
   `rec_uuid` BIGINT(18) NOT NULL COMMENT '领赏着UUID',
   `amount` INT(11) NOT NULL COMMENT '打赏金额（单位：分）',
   `content` VARCHAR(100) NOT NULL COMMENT '描述',
   `rew_tm` BIGINT(18) NOT NULL COMMENT '打赏时间',
   `pay_status` TINYINT(1) NOT NULL COMMENT '支付状态（0-未支付，1-已支付，2支付异常）',
   PRIMARY KEY (`ord_no`)
 ) ENGINE=INNODB DEFAULT CHARSET=utf8;
 
 #支付流水
 CREATE TABLE `t_tra_pay` (
   `tra_no` VARCHAR(30) NOT NULL COMMENT '交易订单号',
   `amount` INT(50) NOT NULL COMMENT '支付金额',
   `status` TINYINT(1) NOT NULL COMMENT '支付状态',
   `time` BIGINT(18) NOT NULL COMMENT '支付时间',
   `ord_no` VARCHAR(30) NOT NULL COMMENT '业务订单号',
   `rec_uid` VARCHAR(50) NOT NULL COMMENT '收款人id',
   `sign` VARCHAR(50) NOT NULL COMMENT '签名串',
   PRIMARY KEY (`tra_no`)
 ) ENGINE=INNODB DEFAULT CHARSET=utf8;
 
 #转账流水
 CREATE TABLE `t_tra_transfer` (
   `tra_no` VARCHAR(11) NOT NULL COMMENT '交易订单号',
   `rec_uuid` BIGINT(18) NOT NULL COMMENT '收款人uuid',
   `amount` INT(11) NOT NULL COMMENT '转账金额(单位：分)',
   `tra_tm` BIGINT(18) NOT NULL COMMENT '转账时间',
   `ord_no` VARCHAR(50) NOT NULL COMMENT '业务订单号',
   `type` INT(1) NOT NULL COMMENT '转账类型（1-领红包转账，2-退款转账，3-打赏转账）',
   PRIMARY KEY (`tra_no`)
 ) ENGINE=INNODB DEFAULT CHARSET=utf8